{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)450bb0a2-98cd-4ec5-9bab-04de23e68c1f","ParentGuid":"(Guid)a2e4a053-9bab-4e6d-8bfa-78852b0a11c2","Name":"(string)Setup_data","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)\n// testTrigger(CLK:= bTest, Q=> );\n\nsCommand := 'sudo reboot';\nrefCommand REF= sCommand;\nrefOutput REF= sOutput;\nLan1DHCPstr := BOOL_TO_STRING(Lan1DHCP);\nLan2DHCPstr := BOOL_TO_STRING(Lan2DHCP);\nsCommand2 := 'sudo /home/jci/ip_script/change_ip_3.py';\nsCommand2 := CONCAT(sCommand2, lan1command);\nsCommand2 := CONCAT(sCommand2, lan1IP);\nsCommand2 := CONCAT(sCommand2, lan2command);\nsCommand2 := CONCAT(sCommand2, lan2IP);\nsCommand2 := CONCAT(sCommand2, gatewaycommand);\nsCommand2 := CONCAT(sCommand2, lan1Gateway);\nsCommand2 := CONCAT(sCommand2, dhcp1command);\nsCommand2 := CONCAT(sCommand2, Lan1DHCPstr);\nsCommand2 := CONCAT(sCommand2, dhcp2command);\nsCommand2 := CONCAT(sCommand2, Lan2DHCPstr); \nsCommand2 := CONCAT(sCommand2, dns1command);\nsCommand2 := CONCAT(sCommand2, lan1DNS1);\nsCommand2 := CONCAT(sCommand2, dns2command);\nsCommand2 := CONCAT(sCommand2, lan1DNS2);\n\nrefCommand2 REF= sCommand2;\nrefOutput2 REF= sOutput2;\n\nusePasswordstr := BOOL_TO_STRING(usePassword);\nsCommand3 := 'python3 /home/jci/mail/send_email_ver2.py';\nsCommand3 := CONCAT(sCommand3, smtp_command);\nsCommand3 := CONCAT(sCommand3, smtpServer);\nsCommand3 := CONCAT(sCommand3, servername_command);\nsCommand3 := CONCAT(sCommand3, serverName);\nsCommand3 := CONCAT(sCommand3, toEmailcommand);\nsCommand3 := CONCAT(sCommand3, toEmail);\nsCommand3 := CONCAT(sCommand3, emailSubject_command);\nsCommand3 := CONCAT(sCommand3, emailSubject);\n//sCommand3 := CONCAT(sCommand3, emailbody_command);\n//sCommand3 := CONCAT(sCommand3, emailBody); \n//sCommand3 := CONCAT(sCommand3, attachedfile_command);\n//sCommand3 := CONCAT(sCommand3, attachFile);\nsCommand3 := CONCAT(sCommand3, port_command);\nsCommand3 := CONCAT(sCommand3, portNo);\nsCommand3 := CONCAT(sCommand3, user_command);\nsCommand3 := CONCAT(sCommand3,userName );\nsCommand3 := CONCAT(sCommand3, passw_command);\nsCommand3 := CONCAT(sCommand3, password);\nsCommand3 := CONCAT(sCommand3, usep_command);\nsCommand3 := CONCAT(sCommand3, usePasswordstr);\n\nrefCommand3 REF= sCommand3;\nrefOutput3 REF= sOutput3;\n\nsCommand4 := 'python3 /home/jci/CodesysGz_PT.py >> /tmp/CodesysGz_PT.log ';\n\nrefCommand4 REF= sCommand4;\nrefOutput4 REF= sOutput4;\n\nsCommand5 := 'cat /home/jci/heartbeat/heartbeat.txt';\n\nrefCommand5 REF= sCommand5;\nrefOutput5 REF= sOutput5;\n\nsCommand6 := 'python3 /home/jci/heartbeat/send_heartbeat.py';\nsCommand6 := CONCAT(sCommand6, smtp_command);\nsCommand6 := CONCAT(sCommand6, smtpServer);\nsCommand6 := CONCAT(sCommand6, servername_command);\nsCommand6 := CONCAT(sCommand6, serverName);\nsCommand6 := CONCAT(sCommand6, toEmailcommand);\nsCommand6 := CONCAT(sCommand6, toEmailHB);\nsCommand6 := CONCAT(sCommand6, emailSubject_command);\nsCommand6 := CONCAT(sCommand6, emailSubjectHB);\n//sCommand6 := CONCAT(sCommand6, emailbody_command);\n//sCommand6 := CONCAT(sCommand6, HBemailBody); \n//sCommand6 := CONCAT(sCommand6, attachedfile_command);\n//sCommand6 := CONCAT(sCommand6, attachFileHB);\nsCommand6 := CONCAT(sCommand6, port_command);\nsCommand6 := CONCAT(sCommand6, portNo);\nsCommand6 := CONCAT(sCommand6, user_command);\nsCommand6 := CONCAT(sCommand6,userName );\nsCommand6 := CONCAT(sCommand6, passw_command);\nsCommand6 := CONCAT(sCommand6, password);\nsCommand6 := CONCAT(sCommand6, usep_command);\nsCommand6 := CONCAT(sCommand6, usePasswordstr);\n\nrefCommand6 REF= sCommand6;\nrefOutput6 REF= sOutput6;\n\n\nIF buttonpressed THEN\n\tSysProcessExecuteCommand2(pszCommand:= refCommand, pszStdOut:= refOutput, udiStdOutLen:= SIZEOF(sOutput), pResult:= ADR(result));\n\tbuttonpressed:= FALSE;\n\tbTest:= FALSE;\n\trebootStatus:= FALSE;\nEND_IF\n\nIF applypressed THEN\n\tSysProcessExecuteCommand2(pszCommand:= refCommand2, pszStdOut:= refOutput2, udiStdOutLen:= SIZEOF(sOutput2), pResult:= ADR(result2));\n\tapplypressed:= FALSE;\n\trebootStatus:= TRUE;\n\t\nEND_IF\n\nIF applyemail THEN\n\tSysProcessExecuteCommand2(pszCommand:= refCommand3, pszStdOut:= refOutput3, udiStdOutLen:= SIZEOF(sOutput3), pResult:= ADR(result3));\n\tapplyemail:= FALSE;\n\tbTest:= FALSE;\nEND_IF\n\nemailtimer (IN:= TRUE, PT:=sendEmailtime);\n\tIF emailtimer.Q THEN\n\t\temailtimer(IN:= FALSE); \n\t\tSysProcessExecuteCommand2(pszCommand:= refCommand4, pszStdOut:= refOutput4, udiStdOutLen:= SIZEOF(sOutput4), pResult:= ADR(result4));\n\t\tSysProcessExecuteCommand2(pszCommand:= refCommand3, pszStdOut:= refOutput3, udiStdOutLen:= SIZEOF(sOutput3), pResult:= ADR(result3));\n\t\tIF result3=0 THEN\n\t\t\temailSent:=TRUE;\n\t\tELSE\n\t\t\theartbeatSent:=FALSE;\n\t\tEND_IF\t\t\n\tEND_IF\n\nheartbeat_timer (IN:= TRUE, PT:=sendheartbeattime);\n\tIF heartbeat_timer.Q THEN\n\t\theartbeat_timer(IN:= FALSE); \n\t\tSysProcessExecuteCommand2(pszCommand:= refCommand5, pszStdOut:= refOutput5, udiStdOutLen:= SIZEOF(sOutput5), pResult:= ADR(result5));\n\t\tSysProcessExecuteCommand2(pszCommand:= refCommand6, pszStdOut:= refOutput6, udiStdOutLen:= SIZEOF(sOutput6), pResult:= ADR(result6));\n\t\tIF result6=0 THEN\n\t\t\theartbeatSent:=TRUE;\n\t\tELSE\n\t\t\theartbeatSent:=FALSE;\n\t\tEND_IF\t\t\n\tEND_IF","LineInfoPersistence":"(string)450bb0a2-98cd-4ec5-9bab-04de23e68c1f_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)PROGRAM Setup_data\nVAR\n\t\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tlan1IP\t\t\t: STRING := '172.16.0.11/24' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tlan1Gateway\t\t\t: STRING := '172.16.0.1/24' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tlan2Gateway\t\t\t: STRING := '192.168.1.1/24' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tlan1DNS1\t\t\t: STRING := '8.8.8.8' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tlan1DNS2\t\t: STRING := '8.8.4.4' ;\n\t\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tlan2IP\t\t\t: STRING := '192.168.1.2/24' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tLan1DHCP : BOOL := FALSE ;\n\t\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tLan2DHCP : BOOL := FALSE ;\n\tLan1DHCPstr : STRING ;\n\tLan2DHCPstr : STRING ;\n//\t  testvariables\n\tbTest : BOOL;\n\tbuttonpressed : BOOL := FALSE ;\n\tapplypressed : BOOL ;\n\trebootStatus : BOOL := FALSE ;\n\ttestTrigger : Standard.R_TRIG;\n\t\n\tsCommand : STRING ;\n\trefCommand : REFERENCE TO STRING;\n\tsOutput : STRING;\n\trefOutput : REFERENCE TO STRING;\n\t\n\tsCommand2 : STRING(250)  ;\n\trefCommand2 : REFERENCE TO STRING(250);\n\tsOutput2 : STRING(250);\n\trefOutput2 : REFERENCE TO STRING(250);\n\t// result : RTS_IEC_RESULT;\n\tresult  : UDINT ;\n\tresult2  : UDINT ;\n\t\n\tsCommand3 : STRING(400)  ;\n\trefCommand3 : REFERENCE TO STRING(400);\n\tsOutput3 : STRING(250);\n\trefOutput3 : REFERENCE TO STRING(250);\n\t// result : RTS_IEC_RESULT;\n\tresult3  : UDINT ;\n\t\n\tsCommand4 : STRING(400)  ;\n\trefCommand4 : REFERENCE TO STRING(400);\n\tsOutput4 : STRING(250);\n\trefOutput4 : REFERENCE TO STRING(250);\n\t// result : RTS_IEC_RESULT;\n\tresult4  : UDINT ;\n\n\tsCommand5 : STRING(400)  ;\n\trefCommand5 : REFERENCE TO STRING(400);\n\tsOutput5 : STRING(250);\n\trefOutput5 : REFERENCE TO STRING(250);\n\t// result : RTS_IEC_RESULT;\n\tresult5  : UDINT ;\n\t\n\tsCommand6 : STRING(400)  ;\n\trefCommand6 : REFERENCE TO STRING(400);\n\tsOutput6 : STRING(250);\n\trefOutput6 : REFERENCE TO STRING(250);\n\t// result : RTS_IEC_RESULT;\n\tresult6  : UDINT ;\n\t \n\t lan1command : STRING := ' -lan1 ' ; \n\t lan2command : STRING := ' -lan2 ' ;\n\t dhcp1command : STRING := ' -dhcp1 ' ;\n     dhcp2command : STRING := ' -dhcp2 ' ;\n\t gatewaycommand : STRING := ' -g ' ;\n\t dns1command : STRING := ' -dns1 ' ;\n\t dns2command : STRING := ' -dns2 ' ;\n\t \n\t // Email variables\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tsmtpServer\t\t\t: STRING := 'saexchange.sa.cruises.princess.com' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tserverName\t\t\t: STRING := 'radarBliss@ncl.com' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\ttoEmail\t\t\t: STRING := 'be-ea-iris@jci.com' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\temailSubject\t: STRING := 'Trend_Marine Norrkoping_Bliss' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\temailBody\t: STRING := ' tx' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tattachFile\t: STRING := '/home/jci/mail/trend.txt.gz' ;\t\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tportNo\t: STRING := '25' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tuserName\t: STRING := 'username' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tpassword\t: STRING := 'password' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\ttoEmailHB : STRING := 'johnsoncontrolssw@gmail.com' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tattachFileHB\t: STRING := '/home/jci/heartbeat/heartbeat.txt' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\temailSubjectHB\t: STRING := 'Bliss' ;\n\tHBemailBody : STRING := 'Heartbeat' ;\n\t{attribute 'ac_persist' := 'PersistenceChannel'}\n\tusePassword\t: BOOL := FALSE ;\n\tusePasswordstr : STRING ;\n\tapplyemail : BOOL := FALSE ;\n\t\n\tsmtp_command : STRING := ' -smtp ' ; \n\tservername_command : STRING := ' -n ' ;\n\t toEmailcommand : STRING := ' -e ' ;\n     emailSubject_command : STRING := ' -s ' ;\n\t emailbody_command : STRING := ' -b ' ;\n\t attachedfile_command : STRING := ' -f ' ;\n\t port_command : STRING := ' -p ' ;\n\t user_command : STRING := ' -user ' ;\n\t passw_command : STRING := ' -passw ' ;\n\t usep_command : STRING := ' -usepass ' ;\n\t {attribute 'ac_persist' := 'PersistenceChannel'}\n\t sendEmailtime : TIME :=T#2H;\n\t emailtimer\t: STANDARD.TON  ;\n\t sendheartbeattime : TIME :=T#1D;\n\t heartbeat_timer : STANDARD.TON  ;\n\t heartbeatSent : BOOL := FALSE;\n\t emailSent : BOOL := FALSE;\n\t\n\t\nEND_VAR","LineInfoPersistence":"(string)450bb0a2-98cd-4ec5-9bab-04de23e68c1f_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)509","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}